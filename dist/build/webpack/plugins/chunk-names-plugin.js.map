{"version":3,"sources":["../../../../build/webpack/plugins/chunk-names-plugin.ts"],"sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\n// This plugin mirrors webpack 3 `filename` and `chunkfilename` behavior\n// This fixes https://github.com/webpack/webpack/issues/6598\n// This plugin is based on https://github.com/researchgate/webpack/commit/2f28947fa0c63ccbb18f39c0098bd791a2c37090\nexport default class ChunkNamesPlugin {\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap(\n      'NextJsChunkNamesPlugin',\n      (compilation: any) => {\n        compilation.chunkTemplate.hooks.renderManifest.intercept({\n          register(tapInfo: any) {\n            if (tapInfo.name === 'JavascriptModulesPlugin') {\n              const originalMethod = tapInfo.fn\n              tapInfo.fn = (result: any, options: any) => {\n                let filenameTemplate\n                const chunk = options.chunk\n                const outputOptions = options.outputOptions\n                if (chunk.filenameTemplate) {\n                  filenameTemplate = chunk.filenameTemplate\n                } else if (chunk.hasEntryModule()) {\n                  filenameTemplate = outputOptions.filename\n                } else {\n                  filenameTemplate = outputOptions.chunkFilename\n                }\n\n                options.chunk.filenameTemplate = filenameTemplate\n                return originalMethod(result, options)\n              }\n            }\n            return tapInfo\n          },\n        })\n      }\n    )\n  }\n}\n"],"names":["ChunkNamesPlugin","apply","compiler","hooks","compilation","tap","chunkTemplate","renderManifest","intercept","register","tapInfo","name","originalMethod","fn","result","options","filenameTemplate","chunk","outputOptions","hasEntryModule","filename","chunkFilename"],"mappings":";;;;;MAIqBA,gBAAgB;IACnCC,KAAK,CAACC,QAA0B,EAAE,CAAC;QACjCA,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAC5B,CAAwB,0BACvBD,WAAgB,GAAK,CAAC;YACrBA,WAAW,CAACE,aAAa,CAACH,KAAK,CAACI,cAAc,CAACC,SAAS,CAAC,CAAC;gBACxDC,QAAQ,EAACC,OAAY,EAAE,CAAC;oBACtB,EAAE,EAAEA,OAAO,CAACC,IAAI,KAAK,CAAyB,0BAAE,CAAC;wBAC/C,KAAK,CAACC,cAAc,GAAGF,OAAO,CAACG,EAAE;wBACjCH,OAAO,CAACG,EAAE,IAAIC,MAAW,EAAEC,OAAY,GAAK,CAAC;4BAC3C,GAAG,CAACC,gBAAgB;4BACpB,KAAK,CAACC,KAAK,GAAGF,OAAO,CAACE,KAAK;4BAC3B,KAAK,CAACC,aAAa,GAAGH,OAAO,CAACG,aAAa;4BAC3C,EAAE,EAAED,KAAK,CAACD,gBAAgB,EAAE,CAAC;gCAC3BA,gBAAgB,GAAGC,KAAK,CAACD,gBAAgB;4BAC3C,CAAC,MAAM,EAAE,EAAEC,KAAK,CAACE,cAAc,IAAI,CAAC;gCAClCH,gBAAgB,GAAGE,aAAa,CAACE,QAAQ;4BAC3C,CAAC,MAAM,CAAC;gCACNJ,gBAAgB,GAAGE,aAAa,CAACG,aAAa;4BAChD,CAAC;4BAEDN,OAAO,CAACE,KAAK,CAACD,gBAAgB,GAAGA,gBAAgB;4BACjD,MAAM,CAACJ,cAAc,CAACE,MAAM,EAAEC,OAAO;wBACvC,CAAC;oBACH,CAAC;oBACD,MAAM,CAACL,OAAO;gBAChB,CAAC;YACH,CAAC;QACH,CAAC;IAEL,CAAC;;kBA9BkBV,gBAAgB"}