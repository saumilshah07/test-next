{"version":3,"sources":["../../../../../../build/webpack/plugins/terser-webpack-plugin/src/index.js"],"sourcesContent":["// @ts-nocheck\nimport * as path from 'path'\nimport {\n  webpack,\n  ModuleFilenameHelpers,\n  isWebpack5,\n  sources,\n} from 'next/dist/compiled/webpack/webpack'\nimport pLimit from 'p-limit'\nimport { Worker } from 'jest-worker'\nimport crypto from 'crypto'\nimport cacache from 'next/dist/compiled/cacache'\nimport { spans } from '../../profiling-plugin'\n\nfunction getEcmaVersion(environment) {\n  // ES 6th\n  if (\n    environment.arrowFunction ||\n    environment.const ||\n    environment.destructuring ||\n    environment.forOf ||\n    environment.module\n  ) {\n    return 2015\n  }\n\n  // ES 11th\n  if (environment.bigIntLiteral || environment.dynamicImport) {\n    return 2020\n  }\n\n  return 5\n}\n\nfunction buildError(error, file) {\n  if (error.line) {\n    return new Error(\n      `${file} from Terser\\n${error.message} [${file}:${error.line},${\n        error.col\n      }]${\n        error.stack ? `\\n${error.stack.split('\\n').slice(1).join('\\n')}` : ''\n      }`\n    )\n  }\n\n  if (error.stack) {\n    return new Error(`${file} from Terser\\n${error.message}\\n${error.stack}`)\n  }\n\n  return new Error(`${file} from Terser\\n${error.message}`)\n}\n\nclass Webpack4Cache {\n  constructor(cacheDir, { SourceMapSource, RawSource }) {\n    this.cacheDir = cacheDir\n    this.sources = { SourceMapSource, RawSource }\n  }\n  getLazyHashedEtag(obj) {\n    let str\n    if (obj.source) {\n      str = obj.source()\n    }\n    const hash = crypto.createHash('md4')\n    hash.update(str ? str : obj)\n    return hash.digest('base64')\n  }\n\n  async getPromise(identifier, etag) {\n    let cachedResult\n\n    try {\n      cachedResult = await cacache.get(this.cacheDir, etag)\n    } catch (ignoreError) {\n      // eslint-disable-next-line no-undefined\n      return undefined\n    }\n\n    cachedResult = JSON.parse(cachedResult.data)\n\n    const { code, name, map, input, inputSourceMap } = cachedResult\n\n    let source\n\n    if (map) {\n      source = new this.sources.SourceMapSource(\n        code,\n        name,\n        map,\n        input,\n        inputSourceMap,\n        true\n      )\n    } else {\n      source = new this.sources.RawSource(code)\n    }\n\n    return { source }\n  }\n\n  async storePromise(identifier, etag, data) {\n    await cacache.put(this.cacheDir, etag, JSON.stringify(data))\n  }\n}\n\nexport class TerserPlugin {\n  constructor(options = {}) {\n    const { cacheDir, terserOptions = {}, parallel, swcMinify } = options\n\n    this.options = {\n      swcMinify,\n      cacheDir,\n      parallel,\n      terserOptions,\n    }\n  }\n\n  async optimize(\n    compiler,\n    compilation,\n    assets,\n    optimizeOptions,\n    cache,\n    { SourceMapSource, RawSource }\n  ) {\n    const compilerSpan = spans.get(compiler)\n    const terserSpan = compilerSpan.traceChild('terser-webpack-plugin-optimize')\n    terserSpan.setAttribute('webpackVersion', isWebpack5 ? 5 : 4)\n    terserSpan.setAttribute('compilationName', compilation.name)\n\n    return terserSpan.traceAsyncFn(async () => {\n      let numberOfAssetsForMinify = 0\n      const assetsList = isWebpack5\n        ? Object.keys(assets)\n        : [\n            ...Array.from(compilation.additionalChunkAssets || []),\n            ...Array.from(assets).reduce((acc, chunk) => {\n              return acc.concat(Array.from(chunk.files || []))\n            }, []),\n          ]\n\n      const assetsForMinify = await Promise.all(\n        assetsList\n          .filter((name) => {\n            if (\n              !ModuleFilenameHelpers.matchObject.bind(\n                // eslint-disable-next-line no-undefined\n                undefined,\n                { test: /\\.[cm]?js(\\?.*)?$/i }\n              )(name)\n            ) {\n              return false\n            }\n\n            const res = compilation.getAsset(name)\n            if (!res) {\n              console.log(name)\n              return false\n            }\n\n            const { info } = res\n\n            // Skip double minimize assets from child compilation\n            if (info.minimized) {\n              return false\n            }\n\n            return true\n          })\n          .map(async (name) => {\n            const { info, source } = compilation.getAsset(name)\n\n            const eTag = cache.getLazyHashedEtag(source)\n            const output = await cache.getPromise(name, eTag)\n\n            if (!output) {\n              numberOfAssetsForMinify += 1\n            }\n\n            return { name, info, inputSource: source, output, eTag }\n          })\n      )\n\n      const numberOfWorkers = Math.min(\n        numberOfAssetsForMinify,\n        optimizeOptions.availableNumberOfCores\n      )\n\n      let initializedWorker\n\n      // eslint-disable-next-line consistent-return\n      const getWorker = () => {\n        if (this.options.swcMinify) {\n          return {\n            minify: async (options) => {\n              const result = await require('../../../../swc').transform(\n                options.input,\n                {\n                  minify: true,\n                  jsc: {\n                    minify: {\n                      compress: true,\n                      mangle: true,\n                    },\n                  },\n                }\n              )\n\n              return result\n            },\n          }\n        }\n\n        if (initializedWorker) {\n          return initializedWorker\n        }\n\n        initializedWorker = new Worker(path.join(__dirname, './minify.js'), {\n          numWorkers: numberOfWorkers,\n          enableWorkerThreads: true,\n        })\n\n        initializedWorker.getStdout().pipe(process.stdout)\n        initializedWorker.getStderr().pipe(process.stderr)\n\n        return initializedWorker\n      }\n\n      const limit = pLimit(\n        // When using the SWC minifier the limit will be handled by Node.js\n        this.options.swcMinify\n          ? Infinity\n          : numberOfAssetsForMinify > 0\n          ? numberOfWorkers\n          : Infinity\n      )\n      const scheduledTasks = []\n\n      for (const asset of assetsForMinify) {\n        scheduledTasks.push(\n          limit(async () => {\n            const { name, inputSource, info, eTag } = asset\n            let { output } = asset\n\n            const minifySpan = terserSpan.traceChild('minify-js')\n            minifySpan.setAttribute('name', name)\n            minifySpan.setAttribute(\n              'cache',\n              typeof output === 'undefined' ? 'MISS' : 'HIT'\n            )\n\n            return minifySpan.traceAsyncFn(async () => {\n              if (!output) {\n                const { source: sourceFromInputSource, map: inputSourceMap } =\n                  inputSource.sourceAndMap()\n\n                const input = Buffer.isBuffer(sourceFromInputSource)\n                  ? sourceFromInputSource.toString()\n                  : sourceFromInputSource\n\n                const options = {\n                  name,\n                  input,\n                  inputSourceMap,\n                  terserOptions: { ...this.options.terserOptions },\n                }\n\n                if (typeof options.terserOptions.module === 'undefined') {\n                  if (typeof info.javascriptModule !== 'undefined') {\n                    options.terserOptions.module = info.javascriptModule\n                  } else if (/\\.mjs(\\?.*)?$/i.test(name)) {\n                    options.terserOptions.module = true\n                  } else if (/\\.cjs(\\?.*)?$/i.test(name)) {\n                    options.terserOptions.module = false\n                  }\n                }\n\n                try {\n                  output = await getWorker().minify(options)\n                } catch (error) {\n                  compilation.errors.push(buildError(error, name))\n\n                  return\n                }\n\n                if (output.map) {\n                  output.source = new SourceMapSource(\n                    output.code,\n                    name,\n                    output.map,\n                    input,\n                    /** @type {SourceMapRawSourceMap} */ (inputSourceMap),\n                    true\n                  )\n                } else {\n                  output.source = new RawSource(output.code)\n                }\n\n                if (isWebpack5) {\n                  await cache.storePromise(name, eTag, {\n                    source: output.source,\n                  })\n                } else {\n                  await cache.storePromise(name, eTag, {\n                    code: output.code,\n                    map: output.map,\n                    name,\n                    input,\n                    inputSourceMap,\n                  })\n                }\n              }\n\n              /** @type {AssetInfo} */\n              const newInfo = { minimized: true }\n              const { source } = output\n\n              compilation.updateAsset(name, source, newInfo)\n            })\n          })\n        )\n      }\n\n      await Promise.all(scheduledTasks)\n\n      if (initializedWorker) {\n        await initializedWorker.end()\n      }\n    })\n  }\n\n  /**\n   * @param {Compiler} compiler\n   * @returns {void}\n   */\n  apply(compiler) {\n    const { SourceMapSource, RawSource } = compiler?.webpack?.sources || sources\n    const { output } = compiler.options\n\n    if (typeof this.options.terserOptions.ecma === 'undefined') {\n      this.options.terserOptions.ecma = getEcmaVersion(output.environment || {})\n    }\n\n    const pluginName = this.constructor.name\n    const availableNumberOfCores = this.options.parallel\n\n    compiler.hooks.compilation.tap(pluginName, (compilation) => {\n      // Don't run minifier against mini-css-extract-plugin\n      if (compilation.name !== 'client' && compilation.name !== 'server') {\n        return\n      }\n\n      const cache = isWebpack5\n        ? compilation.getCache('TerserWebpackPlugin')\n        : new Webpack4Cache(this.options.cacheDir, {\n            SourceMapSource,\n            RawSource,\n          })\n\n      const handleHashForChunk = (hash, chunk) => {\n        // increment 'c' to invalidate cache\n        hash.update('c')\n      }\n\n      if (isWebpack5) {\n        const JSModulesHooks =\n          webpack.javascript.JavascriptModulesPlugin.getCompilationHooks(\n            compilation\n          )\n        JSModulesHooks.chunkHash.tap(pluginName, (chunk, hash) => {\n          if (!chunk.hasRuntime()) return\n          return handleHashForChunk(hash, chunk)\n        })\n\n        compilation.hooks.processAssets.tapPromise(\n          {\n            name: pluginName,\n            stage: webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE,\n          },\n          (assets) =>\n            this.optimize(\n              compiler,\n              compilation,\n              assets,\n              {\n                availableNumberOfCores,\n              },\n              cache,\n              { SourceMapSource, RawSource }\n            )\n        )\n\n        compilation.hooks.statsPrinter.tap(pluginName, (stats) => {\n          stats.hooks.print\n            .for('asset.info.minimized')\n            .tap('terser-webpack-plugin', (minimized, { green, formatFlag }) =>\n              // eslint-disable-next-line no-undefined\n              minimized ? green(formatFlag('minimized')) : undefined\n            )\n        })\n      } else {\n        compilation.mainTemplate.hooks.hashForChunk.tap(\n          pluginName,\n          handleHashForChunk\n        )\n        compilation.chunkTemplate.hooks.hashForChunk.tap(\n          pluginName,\n          handleHashForChunk\n        )\n\n        compilation.hooks.optimizeChunkAssets.tapPromise(\n          pluginName,\n          async (assets) => {\n            return await this.optimize(\n              compiler,\n              compilation,\n              assets,\n              {\n                availableNumberOfCores,\n              },\n              cache,\n              { SourceMapSource, RawSource }\n            )\n          }\n        )\n      }\n    })\n  }\n}\n"],"names":["path","getEcmaVersion","environment","arrowFunction","const","destructuring","forOf","module","bigIntLiteral","dynamicImport","buildError","error","file","line","Error","message","col","stack","split","slice","join","Webpack4Cache","cacheDir","SourceMapSource","RawSource","sources","getLazyHashedEtag","obj","str","source","hash","createHash","update","digest","getPromise","identifier","etag","cachedResult","get","ignoreError","undefined","JSON","parse","data","code","name","map","input","inputSourceMap","storePromise","put","stringify","TerserPlugin","options","terserOptions","parallel","swcMinify","optimize","compiler","compilation","assets","optimizeOptions","cache","compilerSpan","terserSpan","traceChild","setAttribute","traceAsyncFn","numberOfAssetsForMinify","assetsList","Object","keys","Array","from","additionalChunkAssets","reduce","acc","chunk","concat","files","assetsForMinify","Promise","all","filter","matchObject","bind","test","res","getAsset","console","log","info","minimized","eTag","output","inputSource","numberOfWorkers","Math","min","availableNumberOfCores","initializedWorker","getWorker","minify","result","require","transform","jsc","compress","mangle","__dirname","numWorkers","enableWorkerThreads","getStdout","pipe","process","stdout","getStderr","stderr","limit","Infinity","scheduledTasks","asset","push","minifySpan","sourceFromInputSource","sourceAndMap","Buffer","isBuffer","toString","javascriptModule","errors","newInfo","updateAsset","end","apply","webpack","ecma","pluginName","constructor","hooks","tap","getCache","handleHashForChunk","JSModulesHooks","javascript","JavascriptModulesPlugin","getCompilationHooks","chunkHash","hasRuntime","processAssets","tapPromise","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE","statsPrinter","stats","print","for","green","formatFlag","mainTemplate","hashForChunk","chunkTemplate","optimizeChunkAssets"],"mappings":"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"}