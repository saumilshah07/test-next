{"version":3,"sources":["../../../../../../build/webpack/plugins/webpack-conformance-plugin/checks/minification-conformance-check.ts"],"sourcesContent":["import {\n  IWebpackConformanceTest,\n  IConformanceTestResult,\n  IConformanceTestStatus,\n} from '../TestInterface'\nimport { CONFORMANCE_ERROR_PREFIX } from '../constants'\nconst EARLY_EXIT_RESULT: IConformanceTestResult = {\n  result: IConformanceTestStatus.SUCCESS,\n}\n\nexport class MinificationConformanceCheck implements IWebpackConformanceTest {\n  public buildStared(options: any): IConformanceTestResult {\n    if (options.output.path.endsWith('/server')) {\n      return EARLY_EXIT_RESULT\n    }\n    // TODO(prateekbh@): Implement warning for using Terser maybe?\n    const { optimization } = options\n    if (\n      optimization &&\n      (optimization.minimize !== true ||\n        (optimization.minimizer && optimization.minimizer.length === 0))\n    ) {\n      return {\n        result: IConformanceTestStatus.FAILED,\n        errors: [\n          {\n            message: `${CONFORMANCE_ERROR_PREFIX}: Minification is disabled for this build.\\nDisabling minification can result in serious performance degradation.`,\n          },\n        ],\n      }\n    } else {\n      return EARLY_EXIT_RESULT\n    }\n  }\n}\n"],"names":["EARLY_EXIT_RESULT","result","SUCCESS","MinificationConformanceCheck","buildStared","options","output","path","endsWith","optimization","minimize","minimizer","length","FAILED","errors","message"],"mappings":";;;;AAIO,GAAkB,CAAlB,cAAkB;AACgB,GAAc,CAAd,UAAc;AACvD,KAAK,CAACA,iBAAiB,GAA2B,CAAC;IACjDC,MAAM,EAHD,cAAkB,wBAGQC,OAAO;AACxC,CAAC;MAEYC,4BAA4B;IAChCC,WAAW,CAACC,OAAY,EAA0B,CAAC;QACxD,EAAE,EAAEA,OAAO,CAACC,MAAM,CAACC,IAAI,CAACC,QAAQ,CAAC,CAAS,WAAG,CAAC;YAC5C,MAAM,CAACR,iBAAiB;QAC1B,CAAC;QACD,EAA8D,AAA9D,4DAA8D;QAC9D,KAAK,CAAC,CAAC,CAACS,YAAY,EAAC,CAAC,GAAGJ,OAAO;QAChC,EAAE,EACAI,YAAY,KACXA,YAAY,CAACC,QAAQ,KAAK,IAAI,IAC5BD,YAAY,CAACE,SAAS,IAAIF,YAAY,CAACE,SAAS,CAACC,MAAM,KAAK,CAAC,GAChE,CAAC;YACD,MAAM,CAAC,CAAC;gBACNX,MAAM,EAnBP,cAAkB,wBAmBcY,MAAM;gBACrCC,MAAM,EAAE,CAAC;oBACP,CAAC;wBACCC,OAAO,KArBsB,UAAc,0BAqBN,iHAAiH;oBACxJ,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,MAAM,CAAC;YACN,MAAM,CAACf,iBAAiB;QAC1B,CAAC;IACH,CAAC;;QAvBUG,4BAA4B,GAA5BA,4BAA4B"}