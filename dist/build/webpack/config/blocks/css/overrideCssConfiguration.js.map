{"version":3,"sources":["../../../../../../build/webpack/config/blocks/css/overrideCssConfiguration.ts"],"sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { getPostCssPlugins } from './plugins'\n\nexport async function __overrideCssConfiguration(\n  rootDirectory: string,\n  isProduction: boolean,\n  config: webpack.Configuration\n) {\n  const postCssPlugins = await getPostCssPlugins(rootDirectory, isProduction)\n\n  function patch(rule: webpack.RuleSetRule) {\n    if (\n      rule.options &&\n      typeof rule.options === 'object' &&\n      typeof rule.options.postcssOptions === 'object'\n    ) {\n      rule.options.postcssOptions.plugins = postCssPlugins\n    } else if (Array.isArray(rule.oneOf)) {\n      rule.oneOf.forEach(patch)\n    } else if (Array.isArray(rule.use)) {\n      rule.use.forEach((u) => {\n        if (typeof u === 'object') {\n          patch(u)\n        }\n      })\n    }\n  }\n\n  config.module?.rules?.forEach((entry) => {\n    patch(entry)\n  })\n}\n"],"names":["__overrideCssConfiguration","rootDirectory","isProduction","config","postCssPlugins","patch","rule","options","postcssOptions","plugins","Array","isArray","oneOf","forEach","use","u","module","rules","entry"],"mappings":";;;;QAGsBA,0BAA0B,GAA1BA,0BAA0B;AAFd,GAAW,CAAX,QAAW;eAEvBA,0BAA0B,CAC9CC,aAAqB,EACrBC,YAAqB,EACrBC,MAA6B,EAC7B,CAAC;QAqBDA,GAAa;IApBb,KAAK,CAACC,cAAc,GAAG,KAAK,KAPI,QAAW,oBAOIH,aAAa,EAAEC,YAAY;aAEjEG,KAAK,CAACC,IAAyB,EAAE,CAAC;QACzC,EAAE,EACAA,IAAI,CAACC,OAAO,IACZ,MAAM,CAACD,IAAI,CAACC,OAAO,KAAK,CAAQ,WAChC,MAAM,CAACD,IAAI,CAACC,OAAO,CAACC,cAAc,KAAK,CAAQ,SAC/C,CAAC;YACDF,IAAI,CAACC,OAAO,CAACC,cAAc,CAACC,OAAO,GAAGL,cAAc;QACtD,CAAC,MAAM,EAAE,EAAEM,KAAK,CAACC,OAAO,CAACL,IAAI,CAACM,KAAK,GAAG,CAAC;YACrCN,IAAI,CAACM,KAAK,CAACC,OAAO,CAACR,KAAK;QAC1B,CAAC,MAAM,EAAE,EAAEK,KAAK,CAACC,OAAO,CAACL,IAAI,CAACQ,GAAG,GAAG,CAAC;YACnCR,IAAI,CAACQ,GAAG,CAACD,OAAO,EAAEE,CAAC,GAAK,CAAC;gBACvB,EAAE,EAAE,MAAM,CAACA,CAAC,KAAK,CAAQ,SAAE,CAAC;oBAC1BV,KAAK,CAACU,CAAC;gBACT,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;KAEDZ,GAAa,GAAbA,MAAM,CAACa,MAAM,cAAbb,GAAa,KAAbA,IAAI,CAAJA,CAAoB,GAApBA,IAAI,CAAJA,CAAoB,WAApBA,GAAa,CAAEc,KAAK,uBAApBd,IAAI,CAAJA,CAAoB,GAApBA,IAAI,CAAJA,CAAoB,QAAEU,OAAO,EAAEK,KAAK,GAAK,CAAC;QACxCb,KAAK,CAACa,KAAK;IACb,CAAC;AACH,CAAC"}