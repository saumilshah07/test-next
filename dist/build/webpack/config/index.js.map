{"version":3,"sources":["../../../../build/webpack/config/index.ts"],"sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\nimport { NextConfigComplete } from '../../../server/config-shared'\nimport { base } from './blocks/base'\nimport { css } from './blocks/css'\nimport { ConfigurationContext, pipe } from './utils'\n\nexport async function build(\n  config: webpack.Configuration,\n  {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isServer,\n    assetPrefix,\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n    isCraCompat,\n  }: {\n    rootDirectory: string\n    customAppFile: RegExp\n    isDevelopment: boolean\n    isServer: boolean\n    assetPrefix: string\n    sassOptions: any\n    productionBrowserSourceMaps: boolean\n    future: NextConfigComplete['future']\n    isCraCompat?: boolean\n  }\n): Promise<webpack.Configuration> {\n  const ctx: ConfigurationContext = {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isProduction: !isDevelopment,\n    isServer,\n    isClient: !isServer,\n    assetPrefix: assetPrefix\n      ? assetPrefix.endsWith('/')\n        ? assetPrefix.slice(0, -1)\n        : assetPrefix\n      : '',\n    sassOptions,\n    productionBrowserSourceMaps,\n    future,\n    isCraCompat,\n  }\n\n  const fn = pipe(base(ctx), css(ctx))\n  return fn(config)\n}\n"],"names":["build","config","rootDirectory","customAppFile","isDevelopment","isServer","assetPrefix","sassOptions","productionBrowserSourceMaps","future","isCraCompat","ctx","isProduction","isClient","endsWith","slice","fn"],"mappings":";;;;QAMsBA,KAAK,GAALA,KAAK;AAJN,GAAe,CAAf,KAAe;AAChB,GAAc,CAAd,IAAc;AACS,GAAS,CAAT,MAAS;eAE9BA,KAAK,CACzBC,MAA6B,EAC7B,CAAC,CACCC,aAAa,GACbC,aAAa,GACbC,aAAa,GACbC,QAAQ,GACRC,WAAW,GACXC,WAAW,GACXC,2BAA2B,GAC3BC,MAAM,GACNC,WAAW,EAWb,CAAC,EAC+B,CAAC;IACjC,KAAK,CAACC,GAAG,GAAyB,CAAC;QACjCT,aAAa;QACbC,aAAa;QACbC,aAAa;QACbQ,YAAY,GAAGR,aAAa;QAC5BC,QAAQ;QACRQ,QAAQ,GAAGR,QAAQ;QACnBC,WAAW,EAAEA,WAAW,GACpBA,WAAW,CAACQ,QAAQ,CAAC,CAAG,MACtBR,WAAW,CAACS,KAAK,CAAC,CAAC,GAAG,CAAC,IACvBT,WAAW,GACb,CAAE;QACNC,WAAW;QACXC,2BAA2B;QAC3BC,MAAM;QACNC,WAAW;IACb,CAAC;IAED,KAAK,CAACM,EAAE,OA5CiC,MAAS,WAF/B,KAAe,OA8CbL,GAAG,OA7CN,IAAc,MA6CDA,GAAG;IAClC,MAAM,CAACK,EAAE,CAACf,MAAM;AAClB,CAAC"}