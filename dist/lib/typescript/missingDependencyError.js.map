{"version":3,"sources":["../../../lib/typescript/missingDependencyError.ts"],"sourcesContent":["import chalk from 'chalk'\n\nimport { getOxfordCommaList } from '../oxford-comma-list'\nimport { MissingDependency } from '../has-necessary-dependencies'\nimport { FatalError } from '../fatal-error'\nimport { isYarn } from '../is-yarn'\n\nexport function missingDepsError(\n  dir: string,\n  missingPackages: MissingDependency[]\n) {\n  const packagesHuman = getOxfordCommaList(missingPackages.map((p) => p.pkg))\n  const packagesCli = missingPackages.map((p) => p.pkg).join(' ')\n\n  const removalMsg =\n    '\\n\\n' +\n    chalk.bold(\n      'If you are not trying to use TypeScript, please remove the ' +\n        chalk.cyan('tsconfig.json') +\n        ' file from your package root (and any TypeScript files in your pages directory).'\n    )\n\n  throw new FatalError(\n    chalk.bold.red(\n      `It looks like you're trying to use TypeScript but do not have the required package(s) installed.`\n    ) +\n      '\\n\\n' +\n      chalk.bold(`Please install ${chalk.bold(packagesHuman)} by running:`) +\n      '\\n\\n' +\n      `\\t${chalk.bold.cyan(\n        (isYarn(dir) ? 'yarn add --dev' : 'npm install --save-dev') +\n          ' ' +\n          packagesCli\n      )}` +\n      removalMsg +\n      '\\n'\n  )\n}\n"],"names":["missingDepsError","dir","missingPackages","packagesHuman","map","p","pkg","packagesCli","join","removalMsg","bold","cyan","red"],"mappings":";;;;QAOgBA,gBAAgB,GAAhBA,gBAAgB;AAPd,GAAO,CAAP,MAAO;AAEU,GAAsB,CAAtB,gBAAsB;AAE9B,GAAgB,CAAhB,WAAgB;AACpB,GAAY,CAAZ,OAAY;;;;;;SAEnBA,gBAAgB,CAC9BC,GAAW,EACXC,eAAoC,EACpC,CAAC;IACD,KAAK,CAACC,aAAa,OATc,gBAAsB,qBASdD,eAAe,CAACE,GAAG,EAAEC,CAAC,GAAKA,CAAC,CAACC,GAAG;;IACzE,KAAK,CAACC,WAAW,GAAGL,eAAe,CAACE,GAAG,EAAEC,CAAC,GAAKA,CAAC,CAACC,GAAG;MAAEE,IAAI,CAAC,CAAG;IAE9D,KAAK,CAACC,UAAU,GACd,CAAM,QAfQ,MAAO,SAgBfC,IAAI,CACR,CAA6D,+DAjBjD,MAAO,SAkBXC,IAAI,CAAC,CAAe,kBAC1B,CAAkF;IAGxF,KAAK,CAAC,GAAG,CAlBgB,WAAgB,YAJzB,MAAO,SAuBfD,IAAI,CAACE,GAAG,EACX,gGAAgG,KAEjG,CAAM,QA1BM,MAAO,SA2BbF,IAAI,EAAE,eAAe,EA3Bf,MAAO,SA2BgBA,IAAI,CAACP,aAAa,EAAE,YAAY,KACnE,CAAM,SACL,EAAE,EA7BS,MAAO,SA6BRO,IAAI,CAACC,IAAI,MAxBH,OAAY,SAyBnBV,GAAG,IAAI,CAAgB,kBAAG,CAAwB,2BACxD,CAAG,KACHM,WAAW,MAEfE,UAAU,GACV,CAAI;AAEV,CAAC"}