{"version":3,"sources":["../../client/request-idle-callback.ts"],"sourcesContent":["type RequestIdleCallbackHandle = any\ntype RequestIdleCallbackOptions = {\n  timeout: number\n}\ntype RequestIdleCallbackDeadline = {\n  readonly didTimeout: boolean\n  timeRemaining: () => number\n}\n\ndeclare global {\n  interface Window {\n    requestIdleCallback: (\n      callback: (deadline: RequestIdleCallbackDeadline) => void,\n      opts?: RequestIdleCallbackOptions\n    ) => RequestIdleCallbackHandle\n    cancelIdleCallback: (id: RequestIdleCallbackHandle) => void\n  }\n}\n\nexport const requestIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.requestIdleCallback &&\n    self.requestIdleCallback.bind(window)) ||\n  function (\n    cb: (deadline: RequestIdleCallbackDeadline) => void\n  ): NodeJS.Timeout {\n    let start = Date.now()\n    return setTimeout(function () {\n      cb({\n        didTimeout: false,\n        timeRemaining: function () {\n          return Math.max(0, 50 - (Date.now() - start))\n        },\n      })\n    }, 1)\n  }\n\nexport const cancelIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.cancelIdleCallback &&\n    self.cancelIdleCallback.bind(window)) ||\n  function (id: RequestIdleCallbackHandle) {\n    return clearTimeout(id)\n  }\n"],"names":["requestIdleCallback","self","bind","window","cb","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","cancelIdleCallback","id","clearTimeout"],"mappings":";;;;;AAmBO,KAAK,CAACA,mBAAmB,GAC7B,MAAM,CAACC,IAAI,KAAK,CAAW,cAC1BA,IAAI,CAACD,mBAAmB,IACxBC,IAAI,CAACD,mBAAmB,CAACE,IAAI,CAACC,MAAM,KACtC,QAAQ,CACNC,EAAmD,EACnC,CAAC;IACjB,GAAG,CAACC,KAAK,GAAGC,IAAI,CAACC,GAAG;IACpB,MAAM,CAACC,UAAU,CAAC,QAAQ,GAAI,CAAC;QAC7BJ,EAAE,CAAC,CAAC;YACFK,UAAU,EAAE,KAAK;YACjBC,aAAa,EAAE,QAAQ,GAAI,CAAC;gBAC1B,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAIN,IAAI,CAACC,GAAG,KAAKF,KAAK;YAC7C,CAAC;QACH,CAAC;IACH,CAAC,EAAE,CAAC;AACN,CAAC;QAhBUL,mBAAmB,GAAnBA,mBAAmB;AAkBzB,KAAK,CAACa,kBAAkB,GAC5B,MAAM,CAACZ,IAAI,KAAK,CAAW,cAC1BA,IAAI,CAACY,kBAAkB,IACvBZ,IAAI,CAACY,kBAAkB,CAACX,IAAI,CAACC,MAAM,KACrC,QAAQ,CAAEW,EAA6B,EAAE,CAAC;IACxC,MAAM,CAACC,YAAY,CAACD,EAAE;AACxB,CAAC;QANUD,kBAAkB,GAAlBA,kBAAkB"}