{"version":3,"sources":["../../client/next-dev.js"],"sourcesContent":["/* globals __REPLACE_NOOP_IMPORT__ */\nimport { initNext, version, router, emitter, render, renderError } from './'\nimport EventSourcePolyfill from './dev/event-source-polyfill'\nimport initOnDemandEntries from './dev/on-demand-entries-client'\nimport initWebpackHMR from './dev/webpack-hot-middleware-client'\nimport initializeBuildWatcher from './dev/dev-build-watcher'\nimport { displayContent } from './dev/fouc'\nimport { addMessageListener } from './dev/error-overlay/eventsource'\nimport {\n  assign,\n  urlQueryToSearchParams,\n} from '../shared/lib/router/utils/querystring'\n\n// Temporary workaround for the issue described here:\n// https://github.com/vercel/next.js/issues/3775#issuecomment-407438123\n// The runtimeChunk doesn't have dynamic import handling code when there hasn't been a dynamic import\n// The runtimeChunk can't hot reload itself currently to correct it when adding pages using on-demand-entries\n// eslint-disable-next-line no-unused-expressions\n__REPLACE_NOOP_IMPORT__\n\n// Support EventSource on Internet Explorer 11\nif (!window.EventSource) {\n  window.EventSource = EventSourcePolyfill\n}\n\nconst {\n  __NEXT_DATA__: { assetPrefix },\n} = window\n\nconst prefix = assetPrefix || ''\nconst webpackHMR = initWebpackHMR()\n\nwindow.next = {\n  version,\n  // router is initialized later so it has to be live-binded\n  get router() {\n    return router\n  },\n  emitter,\n  render,\n  renderError,\n}\ninitNext({ webpackHMR })\n  .then(({ renderCtx }) => {\n    initOnDemandEntries({ assetPrefix: prefix })\n\n    let buildIndicatorHandler = () => {}\n\n    function devPagesManifestListener(event) {\n      if (event.data.indexOf('devPagesManifest') !== -1) {\n        fetch(`${prefix}/_next/static/development/_devPagesManifest.json`)\n          .then((res) => res.json())\n          .then((manifest) => {\n            window.__DEV_PAGES_MANIFEST = manifest\n          })\n          .catch((err) => {\n            console.log(`Failed to fetch devPagesManifest`, err)\n          })\n      } else if (event.data.indexOf('serverOnlyChanges') !== -1) {\n        const { pages } = JSON.parse(event.data)\n\n        // Make sure to reload when the dev-overlay is showing for an\n        // API route\n        if (pages.includes(router.query.__NEXT_PAGE)) {\n          return window.location.reload()\n        }\n\n        if (!router.clc && pages.includes(router.pathname)) {\n          console.log('Refreshing page data due to server-side change')\n\n          buildIndicatorHandler('building')\n\n          const clearIndicator = () => buildIndicatorHandler('built')\n\n          router\n            .replace(\n              router.pathname +\n                '?' +\n                String(\n                  assign(\n                    urlQueryToSearchParams(router.query),\n                    new URLSearchParams(location.search)\n                  )\n                ),\n              router.asPath\n            )\n            .finally(clearIndicator)\n        }\n      }\n    }\n    devPagesManifestListener.unfiltered = true\n    addMessageListener(devPagesManifestListener)\n\n    if (process.env.__NEXT_BUILD_INDICATOR) {\n      initializeBuildWatcher((handler) => {\n        buildIndicatorHandler = handler\n      })\n    }\n\n    // delay rendering until after styles have been applied in development\n    displayContent(() => {\n      render(renderCtx)\n    })\n  })\n  .catch((err) => {\n    console.error('Error was not caught', err)\n  })\n"],"names":["__REPLACE_NOOP_IMPORT__","window","EventSource","__NEXT_DATA__","assetPrefix","prefix","webpackHMR","next","version","router","emitter","render","renderError","then","renderCtx","buildIndicatorHandler","devPagesManifestListener","event","data","indexOf","fetch","res","json","manifest","__DEV_PAGES_MANIFEST","catch","err","console","log","pages","JSON","parse","includes","query","__NEXT_PAGE","location","reload","clc","pathname","clearIndicator","replace","String","URLSearchParams","search","asPath","finally","unfiltered","process","env","__NEXT_BUILD_INDICATOR","handler","error"],"mappings":"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"}