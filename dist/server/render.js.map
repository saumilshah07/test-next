{"version":3,"sources":["../../server/render.tsx"],"sourcesContent":["import { IncomingMessage, ServerResponse } from 'http'\nimport { ParsedUrlQuery } from 'querystring'\nimport { PassThrough } from 'stream'\nimport React from 'react'\nimport * as ReactDOMServer from 'react-dom/server'\nimport flush from 'styled-jsx/server'\nimport Observable from 'next/dist/compiled/zen-observable'\nimport { warn } from '../build/output/log'\nimport { UnwrapPromise } from '../lib/coalesced-function'\nimport {\n  GSP_NO_RETURNED_VALUE,\n  GSSP_COMPONENT_MEMBER_ERROR,\n  GSSP_NO_RETURNED_VALUE,\n  STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR,\n  SERVER_PROPS_GET_INIT_PROPS_CONFLICT,\n  SERVER_PROPS_SSG_CONFLICT,\n  SSG_GET_INITIAL_PROPS_CONFLICT,\n  UNSTABLE_REVALIDATE_RENAME_ERROR,\n} from '../lib/constants'\nimport { isSerializableProps } from '../lib/is-serializable-props'\nimport { GetServerSideProps, GetStaticProps, PreviewData } from '../types'\nimport { isInAmpMode } from '../shared/lib/amp'\nimport { AmpStateContext } from '../shared/lib/amp-context'\nimport {\n  BODY_RENDER_TARGET,\n  SERVER_PROPS_ID,\n  STATIC_PROPS_ID,\n  STATIC_STATUS_PAGES,\n} from '../shared/lib/constants'\nimport { defaultHead } from '../shared/lib/head'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context'\nimport Loadable from '../shared/lib/loadable'\nimport { LoadableContext } from '../shared/lib/loadable-context'\nimport postProcess from '../shared/lib/post-process'\nimport { RouterContext } from '../shared/lib/router-context'\nimport { NextRouter } from '../shared/lib/router/router'\nimport { isDynamicRoute } from '../shared/lib/router/utils/is-dynamic'\nimport {\n  AppType,\n  ComponentsEnhancer,\n  DocumentInitialProps,\n  DocumentProps,\n  HtmlContext,\n  HtmlProps,\n  getDisplayName,\n  isResSent,\n  loadGetInitialProps,\n  NextComponentType,\n  RenderPage,\n  RenderPageResult,\n} from '../shared/lib/utils'\nimport {\n  tryGetPreviewData,\n  NextApiRequestCookies,\n  __ApiPreviewProps,\n} from './api-utils'\nimport { denormalizePagePath } from './denormalize-page-path'\nimport { FontManifest, getFontDefinitionFromManifest } from './font-utils'\nimport { LoadComponentsReturnType, ManifestItem } from './load-components'\nimport { normalizePagePath } from './normalize-page-path'\nimport optimizeAmp from './optimize-amp'\nimport {\n  allowedStatusCodes,\n  getRedirectStatus,\n  Redirect,\n} from '../lib/load-custom-routes'\nimport { DomainLocale } from './config'\nimport { mergeResults, RenderResult, resultsToString } from './utils'\n\nfunction noRouter() {\n  const message =\n    'No router instance found. you should only use \"next/router\" inside the client side of your app. https://nextjs.org/docs/messages/no-router-instance'\n  throw new Error(message)\n}\n\nclass ServerRouter implements NextRouter {\n  route: string\n  pathname: string\n  query: ParsedUrlQuery\n  asPath: string\n  basePath: string\n  events: any\n  isFallback: boolean\n  locale?: string\n  isReady: boolean\n  locales?: string[]\n  defaultLocale?: string\n  domainLocales?: DomainLocale[]\n  isPreview: boolean\n  isLocaleDomain: boolean\n\n  constructor(\n    pathname: string,\n    query: ParsedUrlQuery,\n    as: string,\n    { isFallback }: { isFallback: boolean },\n    isReady: boolean,\n    basePath: string,\n    locale?: string,\n    locales?: string[],\n    defaultLocale?: string,\n    domainLocales?: DomainLocale[],\n    isPreview?: boolean,\n    isLocaleDomain?: boolean\n  ) {\n    this.route = pathname.replace(/\\/$/, '') || '/'\n    this.pathname = pathname\n    this.query = query\n    this.asPath = as\n    this.isFallback = isFallback\n    this.basePath = basePath\n    this.locale = locale\n    this.locales = locales\n    this.defaultLocale = defaultLocale\n    this.isReady = isReady\n    this.domainLocales = domainLocales\n    this.isPreview = !!isPreview\n    this.isLocaleDomain = !!isLocaleDomain\n  }\n\n  push(): any {\n    noRouter()\n  }\n  replace(): any {\n    noRouter()\n  }\n  reload() {\n    noRouter()\n  }\n  back() {\n    noRouter()\n  }\n  prefetch(): any {\n    noRouter()\n  }\n  beforePopState() {\n    noRouter()\n  }\n}\n\nfunction enhanceComponents(\n  options: ComponentsEnhancer,\n  App: AppType,\n  Component: NextComponentType\n): {\n  App: AppType\n  Component: NextComponentType\n} {\n  // For backwards compatibility\n  if (typeof options === 'function') {\n    return {\n      App,\n      Component: options(Component),\n    }\n  }\n\n  return {\n    App: options.enhanceApp ? options.enhanceApp(App) : App,\n    Component: options.enhanceComponent\n      ? options.enhanceComponent(Component)\n      : Component,\n  }\n}\n\nexport type RenderOptsPartial = {\n  buildId: string\n  canonicalBase: string\n  runtimeConfig?: { [key: string]: any }\n  assetPrefix?: string\n  err?: Error | null\n  nextExport?: boolean\n  dev?: boolean\n  ampPath?: string\n  ErrorDebug?: React.ComponentType<{ error: Error }>\n  ampValidator?: (html: string, pathname: string) => Promise<void>\n  ampSkipValidation?: boolean\n  ampOptimizerConfig?: { [key: string]: any }\n  isDataReq?: boolean\n  params?: ParsedUrlQuery\n  previewProps: __ApiPreviewProps\n  basePath: string\n  unstable_runtimeJS?: false\n  unstable_JsPreload?: false\n  optimizeFonts: boolean\n  fontManifest?: FontManifest\n  optimizeImages: boolean\n  optimizeCss: any\n  devOnlyCacheBusterQueryString?: string\n  resolvedUrl?: string\n  resolvedAsPath?: string\n  distDir?: string\n  locale?: string\n  locales?: string[]\n  defaultLocale?: string\n  domainLocales?: DomainLocale[]\n  disableOptimizedLoading?: boolean\n  requireStaticHTML?: boolean\n  concurrentFeatures?: boolean\n  customServer?: boolean\n}\n\nexport type RenderOpts = LoadComponentsReturnType & RenderOptsPartial\n\nconst invalidKeysMsg = (methodName: string, invalidKeys: string[]) => {\n  return (\n    `Additional keys were returned from \\`${methodName}\\`. Properties intended for your component must be nested under the \\`props\\` key, e.g.:` +\n    `\\n\\n\\treturn { props: { title: 'My Title', content: '...' } }` +\n    `\\n\\nKeys that need to be moved: ${invalidKeys.join(', ')}.` +\n    `\\nRead more: https://nextjs.org/docs/messages/invalid-getstaticprops-value`\n  )\n}\n\nfunction checkRedirectValues(\n  redirect: Redirect,\n  req: IncomingMessage,\n  method: 'getStaticProps' | 'getServerSideProps'\n) {\n  const { destination, permanent, statusCode, basePath } = redirect\n  let errors: string[] = []\n\n  const hasStatusCode = typeof statusCode !== 'undefined'\n  const hasPermanent = typeof permanent !== 'undefined'\n\n  if (hasPermanent && hasStatusCode) {\n    errors.push(`\\`permanent\\` and \\`statusCode\\` can not both be provided`)\n  } else if (hasPermanent && typeof permanent !== 'boolean') {\n    errors.push(`\\`permanent\\` must be \\`true\\` or \\`false\\``)\n  } else if (hasStatusCode && !allowedStatusCodes.has(statusCode!)) {\n    errors.push(\n      `\\`statusCode\\` must undefined or one of ${[...allowedStatusCodes].join(\n        ', '\n      )}`\n    )\n  }\n  const destinationType = typeof destination\n\n  if (destinationType !== 'string') {\n    errors.push(\n      `\\`destination\\` should be string but received ${destinationType}`\n    )\n  }\n\n  const basePathType = typeof basePath\n\n  if (basePathType !== 'undefined' && basePathType !== 'boolean') {\n    errors.push(\n      `\\`basePath\\` should be undefined or a false, received ${basePathType}`\n    )\n  }\n\n  if (errors.length > 0) {\n    throw new Error(\n      `Invalid redirect object returned from ${method} for ${req.url}\\n` +\n        errors.join(' and ') +\n        '\\n' +\n        `See more info here: https://nextjs.org/docs/messages/invalid-redirect-gssp`\n    )\n  }\n}\n\nexport async function renderToHTML(\n  req: IncomingMessage,\n  res: ServerResponse,\n  pathname: string,\n  query: ParsedUrlQuery,\n  renderOpts: RenderOpts\n): Promise<RenderResult | null> {\n  // In dev we invalidate the cache by appending a timestamp to the resource URL.\n  // This is a workaround to fix https://github.com/vercel/next.js/issues/5860\n  // TODO: remove this workaround when https://bugs.webkit.org/show_bug.cgi?id=187726 is fixed.\n  renderOpts.devOnlyCacheBusterQueryString = renderOpts.dev\n    ? renderOpts.devOnlyCacheBusterQueryString || `?ts=${Date.now()}`\n    : ''\n\n  // don't modify original query object\n  query = Object.assign({}, query)\n\n  const {\n    err,\n    dev = false,\n    ampPath = '',\n    App,\n    Document,\n    pageConfig = {},\n    Component,\n    buildManifest,\n    fontManifest,\n    reactLoadableManifest,\n    ErrorDebug,\n    getStaticProps,\n    getStaticPaths,\n    getServerSideProps,\n    isDataReq,\n    params,\n    previewProps,\n    basePath,\n    devOnlyCacheBusterQueryString,\n    requireStaticHTML,\n    concurrentFeatures,\n  } = renderOpts\n\n  const getFontDefinition = (url: string): string => {\n    if (fontManifest) {\n      return getFontDefinitionFromManifest(url, fontManifest)\n    }\n    return ''\n  }\n\n  const callMiddleware = async (method: string, args: any[], props = false) => {\n    let results: any = props ? {} : []\n\n    if ((Document as any)[`${method}Middleware`]) {\n      let middlewareFunc = await (Document as any)[`${method}Middleware`]\n      middlewareFunc = middlewareFunc.default || middlewareFunc\n\n      const curResults = await middlewareFunc(...args)\n      if (props) {\n        for (const result of curResults) {\n          results = {\n            ...results,\n            ...result,\n          }\n        }\n      } else {\n        results = curResults\n      }\n    }\n    return results\n  }\n\n  const headTags = (...args: any) => callMiddleware('headTags', args)\n\n  const isFallback = !!query.__nextFallback\n  delete query.__nextFallback\n  delete query.__nextLocale\n  delete query.__nextDefaultLocale\n\n  const isSSG = !!getStaticProps\n  const isBuildTimeSSG = isSSG && renderOpts.nextExport\n  const defaultAppGetInitialProps =\n    App.getInitialProps === (App as any).origGetInitialProps\n\n  const hasPageGetInitialProps = !!(Component as any).getInitialProps\n\n  const pageIsDynamic = isDynamicRoute(pathname)\n\n  const isAutoExport =\n    !hasPageGetInitialProps &&\n    defaultAppGetInitialProps &&\n    !isSSG &&\n    !getServerSideProps\n\n  for (const methodName of [\n    'getStaticProps',\n    'getServerSideProps',\n    'getStaticPaths',\n  ]) {\n    if ((Component as any)[methodName]) {\n      throw new Error(\n        `page ${pathname} ${methodName} ${GSSP_COMPONENT_MEMBER_ERROR}`\n      )\n    }\n  }\n\n  if (hasPageGetInitialProps && isSSG) {\n    throw new Error(SSG_GET_INITIAL_PROPS_CONFLICT + ` ${pathname}`)\n  }\n\n  if (hasPageGetInitialProps && getServerSideProps) {\n    throw new Error(SERVER_PROPS_GET_INIT_PROPS_CONFLICT + ` ${pathname}`)\n  }\n\n  if (getServerSideProps && isSSG) {\n    throw new Error(SERVER_PROPS_SSG_CONFLICT + ` ${pathname}`)\n  }\n\n  if (getStaticPaths && !pageIsDynamic) {\n    throw new Error(\n      `getStaticPaths is only allowed for dynamic SSG pages and was found on '${pathname}'.` +\n        `\\nRead more: https://nextjs.org/docs/messages/non-dynamic-getstaticpaths-usage`\n    )\n  }\n\n  if (!!getStaticPaths && !isSSG) {\n    throw new Error(\n      `getStaticPaths was added without a getStaticProps in ${pathname}. Without getStaticProps, getStaticPaths does nothing`\n    )\n  }\n\n  if (isSSG && pageIsDynamic && !getStaticPaths) {\n    throw new Error(\n      `getStaticPaths is required for dynamic SSG pages and is missing for '${pathname}'.` +\n        `\\nRead more: https://nextjs.org/docs/messages/invalid-getstaticpaths-value`\n    )\n  }\n\n  let asPath: string = renderOpts.resolvedAsPath || (req.url as string)\n\n  if (dev) {\n    const { isValidElementType } = require('react-is')\n    if (!isValidElementType(Component)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"${pathname}\"`\n      )\n    }\n\n    if (!isValidElementType(App)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"/_app\"`\n      )\n    }\n\n    if (!isValidElementType(Document)) {\n      throw new Error(\n        `The default export is not a React Component in page: \"/_document\"`\n      )\n    }\n\n    if (isAutoExport || isFallback) {\n      // remove query values except ones that will be set during export\n      query = {\n        ...(query.amp\n          ? {\n              amp: query.amp,\n            }\n          : {}),\n      }\n      asPath = `${pathname}${\n        // ensure trailing slash is present for non-dynamic auto-export pages\n        req.url!.endsWith('/') && pathname !== '/' && !pageIsDynamic ? '/' : ''\n      }`\n      req.url = pathname\n    }\n\n    if (pathname === '/404' && (hasPageGetInitialProps || getServerSideProps)) {\n      throw new Error(\n        `\\`pages/404\\` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`\n      )\n    }\n    if (\n      STATIC_STATUS_PAGES.includes(pathname) &&\n      (hasPageGetInitialProps || getServerSideProps)\n    ) {\n      throw new Error(\n        `\\`pages${pathname}\\` ${STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR}`\n      )\n    }\n  }\n\n  await Loadable.preloadAll() // Make sure all dynamic imports are loaded\n\n  let isPreview\n  let previewData: PreviewData\n\n  if ((isSSG || getServerSideProps) && !isFallback) {\n    // Reads of this are cached on the `req` object, so this should resolve\n    // instantly. There's no need to pass this data down from a previous\n    // invoke, where we'd have to consider server & serverless.\n    previewData = tryGetPreviewData(req, res, previewProps)\n    isPreview = previewData !== false\n  }\n\n  // url will always be set\n  const routerIsReady = !!(\n    getServerSideProps ||\n    hasPageGetInitialProps ||\n    (!defaultAppGetInitialProps && !isSSG)\n  )\n  const router = new ServerRouter(\n    pathname,\n    query,\n    asPath,\n    {\n      isFallback: isFallback,\n    },\n    routerIsReady,\n    basePath,\n    renderOpts.locale,\n    renderOpts.locales,\n    renderOpts.defaultLocale,\n    renderOpts.domainLocales,\n    isPreview,\n    (req as any).__nextIsLocaleDomain\n  )\n  const ctx = {\n    err,\n    req: isAutoExport ? undefined : req,\n    res: isAutoExport ? undefined : res,\n    pathname,\n    query,\n    asPath,\n    locale: renderOpts.locale,\n    locales: renderOpts.locales,\n    defaultLocale: renderOpts.defaultLocale,\n    AppTree: (props: any) => {\n      return (\n        <AppContainer>\n          <App {...props} Component={Component} router={router} />\n        </AppContainer>\n      )\n    },\n  }\n  let props: any\n\n  const ampState = {\n    ampFirst: pageConfig.amp === true,\n    hasQuery: Boolean(query.amp),\n    hybrid: pageConfig.amp === 'hybrid',\n  }\n\n  const inAmpMode = isInAmpMode(ampState)\n\n  const reactLoadableModules: string[] = []\n\n  let head: JSX.Element[] = defaultHead(inAmpMode)\n\n  let scriptLoader: any = {}\n  const nextExport =\n    !isSSG && (renderOpts.nextExport || (dev && (isAutoExport || isFallback)))\n\n  const AppContainer = ({ children }: { children: JSX.Element }) => (\n    <RouterContext.Provider value={router}>\n      <AmpStateContext.Provider value={ampState}>\n        <HeadManagerContext.Provider\n          value={{\n            updateHead: (state) => {\n              head = state\n            },\n            updateScripts: (scripts) => {\n              scriptLoader = scripts\n            },\n            scripts: {},\n            mountedInstances: new Set(),\n          }}\n        >\n          <LoadableContext.Provider\n            value={(moduleName) => reactLoadableModules.push(moduleName)}\n          >\n            {children}\n          </LoadableContext.Provider>\n        </HeadManagerContext.Provider>\n      </AmpStateContext.Provider>\n    </RouterContext.Provider>\n  )\n\n  try {\n    props = await loadGetInitialProps(App, {\n      AppTree: ctx.AppTree,\n      Component,\n      router,\n      ctx,\n    })\n\n    if ((isSSG || getServerSideProps) && isPreview) {\n      props.__N_PREVIEW = true\n    }\n\n    if (isSSG) {\n      props[STATIC_PROPS_ID] = true\n    }\n\n    if (isSSG && !isFallback) {\n      let data: UnwrapPromise<ReturnType<GetStaticProps>>\n\n      try {\n        data = await getStaticProps!({\n          ...(pageIsDynamic ? { params: query as ParsedUrlQuery } : undefined),\n          ...(isPreview\n            ? { preview: true, previewData: previewData }\n            : undefined),\n          locales: renderOpts.locales,\n          locale: renderOpts.locale,\n          defaultLocale: renderOpts.defaultLocale,\n        })\n      } catch (staticPropsError) {\n        // remove not found error code to prevent triggering legacy\n        // 404 rendering\n        if (staticPropsError.code === 'ENOENT') {\n          delete staticPropsError.code\n        }\n        throw staticPropsError\n      }\n\n      if (data == null) {\n        throw new Error(GSP_NO_RETURNED_VALUE)\n      }\n\n      const invalidKeys = Object.keys(data).filter(\n        (key) =>\n          key !== 'revalidate' &&\n          key !== 'props' &&\n          key !== 'redirect' &&\n          key !== 'notFound'\n      )\n\n      if (invalidKeys.includes('unstable_revalidate')) {\n        throw new Error(UNSTABLE_REVALIDATE_RENAME_ERROR)\n      }\n\n      if (invalidKeys.length) {\n        throw new Error(invalidKeysMsg('getStaticProps', invalidKeys))\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (\n          typeof (data as any).notFound !== 'undefined' &&\n          typeof (data as any).redirect !== 'undefined'\n        ) {\n          throw new Error(\n            `\\`redirect\\` and \\`notFound\\` can not both be returned from ${\n              isSSG ? 'getStaticProps' : 'getServerSideProps'\n            } at the same time. Page: ${pathname}\\nSee more info here: https://nextjs.org/docs/messages/gssp-mixed-not-found-redirect`\n          )\n        }\n      }\n\n      if ('notFound' in data && data.notFound) {\n        if (pathname === '/404') {\n          throw new Error(\n            `The /404 page can not return notFound in \"getStaticProps\", please remove it to continue!`\n          )\n        }\n\n        ;(renderOpts as any).isNotFound = true\n      }\n\n      if (\n        'redirect' in data &&\n        data.redirect &&\n        typeof data.redirect === 'object'\n      ) {\n        checkRedirectValues(data.redirect as Redirect, req, 'getStaticProps')\n\n        if (isBuildTimeSSG) {\n          throw new Error(\n            `\\`redirect\\` can not be returned from getStaticProps during prerendering (${req.url})\\n` +\n              `See more info here: https://nextjs.org/docs/messages/gsp-redirect-during-prerender`\n          )\n        }\n\n        ;(data as any).props = {\n          __N_REDIRECT: data.redirect.destination,\n          __N_REDIRECT_STATUS: getRedirectStatus(data.redirect),\n        }\n        if (typeof data.redirect.basePath !== 'undefined') {\n          ;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath\n        }\n        ;(renderOpts as any).isRedirect = true\n      }\n\n      if (\n        (dev || isBuildTimeSSG) &&\n        !(renderOpts as any).isNotFound &&\n        !isSerializableProps(pathname, 'getStaticProps', (data as any).props)\n      ) {\n        // this fn should throw an error instead of ever returning `false`\n        throw new Error(\n          'invariant: getStaticProps did not return valid props. Please report this.'\n        )\n      }\n\n      if ('revalidate' in data) {\n        if (typeof data.revalidate === 'number') {\n          if (!Number.isInteger(data.revalidate)) {\n            throw new Error(\n              `A page's revalidate option must be seconds expressed as a natural number for ${req.url}. Mixed numbers, such as '${data.revalidate}', cannot be used.` +\n                `\\nTry changing the value to '${Math.ceil(\n                  data.revalidate\n                )}' or using \\`Math.ceil()\\` if you're computing the value.`\n            )\n          } else if (data.revalidate <= 0) {\n            throw new Error(\n              `A page's revalidate option can not be less than or equal to zero for ${req.url}. A revalidate option of zero means to revalidate after _every_ request, and implies stale data cannot be tolerated.` +\n                `\\n\\nTo never revalidate, you can set revalidate to \\`false\\` (only ran once at build-time).` +\n                `\\nTo revalidate as soon as possible, you can set the value to \\`1\\`.`\n            )\n          } else if (data.revalidate > 31536000) {\n            // if it's greater than a year for some reason error\n            console.warn(\n              `Warning: A page's revalidate option was set to more than a year for ${req.url}. This may have been done in error.` +\n                `\\nTo only run getStaticProps at build-time and not revalidate at runtime, you can set \\`revalidate\\` to \\`false\\`!`\n            )\n          }\n        } else if (data.revalidate === true) {\n          // When enabled, revalidate after 1 second. This value is optimal for\n          // the most up-to-date page possible, but without a 1-to-1\n          // request-refresh ratio.\n          data.revalidate = 1\n        } else if (\n          data.revalidate === false ||\n          typeof data.revalidate === 'undefined'\n        ) {\n          // By default, we never revalidate.\n          data.revalidate = false\n        } else {\n          throw new Error(\n            `A page's revalidate option must be seconds expressed as a natural number. Mixed numbers and strings cannot be used. Received '${JSON.stringify(\n              data.revalidate\n            )}' for ${req.url}`\n          )\n        }\n      } else {\n        // By default, we never revalidate.\n        ;(data as any).revalidate = false\n      }\n\n      props.pageProps = Object.assign(\n        {},\n        props.pageProps,\n        'props' in data ? data.props : undefined\n      )\n\n      // pass up revalidate and props for export\n      // TODO: change this to a different passing mechanism\n      ;(renderOpts as any).revalidate =\n        'revalidate' in data ? data.revalidate : undefined\n      ;(renderOpts as any).pageData = props\n\n      // this must come after revalidate is added to renderOpts\n      if ((renderOpts as any).isNotFound) {\n        return null\n      }\n    }\n\n    if (getServerSideProps) {\n      props[SERVER_PROPS_ID] = true\n    }\n\n    if (getServerSideProps && !isFallback) {\n      let data: UnwrapPromise<ReturnType<GetServerSideProps>>\n\n      try {\n        data = await getServerSideProps({\n          req: req as IncomingMessage & {\n            cookies: NextApiRequestCookies\n          },\n          res,\n          query,\n          resolvedUrl: renderOpts.resolvedUrl as string,\n          ...(pageIsDynamic ? { params: params as ParsedUrlQuery } : undefined),\n          ...(previewData !== false\n            ? { preview: true, previewData: previewData }\n            : undefined),\n          locales: renderOpts.locales,\n          locale: renderOpts.locale,\n          defaultLocale: renderOpts.defaultLocale,\n        })\n      } catch (serverSidePropsError) {\n        // remove not found error code to prevent triggering legacy\n        // 404 rendering\n        if (serverSidePropsError.code === 'ENOENT') {\n          delete serverSidePropsError.code\n        }\n        throw serverSidePropsError\n      }\n\n      if (data == null) {\n        throw new Error(GSSP_NO_RETURNED_VALUE)\n      }\n\n      const invalidKeys = Object.keys(data).filter(\n        (key) => key !== 'props' && key !== 'redirect' && key !== 'notFound'\n      )\n\n      if ((data as any).unstable_notFound) {\n        throw new Error(\n          `unstable_notFound has been renamed to notFound, please update the field to continue. Page: ${pathname}`\n        )\n      }\n      if ((data as any).unstable_redirect) {\n        throw new Error(\n          `unstable_redirect has been renamed to redirect, please update the field to continue. Page: ${pathname}`\n        )\n      }\n\n      if (invalidKeys.length) {\n        throw new Error(invalidKeysMsg('getServerSideProps', invalidKeys))\n      }\n\n      if ('notFound' in data && data.notFound) {\n        if (pathname === '/404') {\n          throw new Error(\n            `The /404 page can not return notFound in \"getStaticProps\", please remove it to continue!`\n          )\n        }\n\n        ;(renderOpts as any).isNotFound = true\n        return null\n      }\n\n      if ('redirect' in data && typeof data.redirect === 'object') {\n        checkRedirectValues(\n          data.redirect as Redirect,\n          req,\n          'getServerSideProps'\n        )\n        ;(data as any).props = {\n          __N_REDIRECT: data.redirect.destination,\n          __N_REDIRECT_STATUS: getRedirectStatus(data.redirect),\n        }\n        if (typeof data.redirect.basePath !== 'undefined') {\n          ;(data as any).props.__N_REDIRECT_BASE_PATH = data.redirect.basePath\n        }\n        ;(renderOpts as any).isRedirect = true\n      }\n\n      if ((data as any).props instanceof Promise) {\n        ;(data as any).props = await (data as any).props\n      }\n\n      if (\n        (dev || isBuildTimeSSG) &&\n        !isSerializableProps(\n          pathname,\n          'getServerSideProps',\n          (data as any).props\n        )\n      ) {\n        // this fn should throw an error instead of ever returning `false`\n        throw new Error(\n          'invariant: getServerSideProps did not return valid props. Please report this.'\n        )\n      }\n\n      props.pageProps = Object.assign({}, props.pageProps, (data as any).props)\n      ;(renderOpts as any).pageData = props\n    }\n  } catch (dataFetchError) {\n    throw dataFetchError\n  }\n\n  if (\n    !isSSG && // we only show this warning for legacy pages\n    !getServerSideProps &&\n    process.env.NODE_ENV !== 'production' &&\n    Object.keys(props?.pageProps || {}).includes('url')\n  ) {\n    console.warn(\n      `The prop \\`url\\` is a reserved prop in Next.js for legacy reasons and will be overridden on page ${pathname}\\n` +\n        `See more info here: https://nextjs.org/docs/messages/reserved-page-prop`\n    )\n  }\n\n  // Avoid rendering page un-necessarily for getServerSideProps data request\n  // and getServerSideProps/getStaticProps redirects\n  if ((isDataReq && !isSSG) || (renderOpts as any).isRedirect) {\n    return Observable.of(JSON.stringify(props))\n  }\n\n  // We don't call getStaticProps or getServerSideProps while generating\n  // the fallback so make sure to set pageProps to an empty object\n  if (isFallback) {\n    props.pageProps = {}\n  }\n\n  // the response might be finished on the getInitialProps call\n  if (isResSent(res) && !isSSG) return null\n\n  // we preload the buildManifest for auto-export dynamic pages\n  // to speed up hydrating query values\n  let filteredBuildManifest = buildManifest\n  if (isAutoExport && pageIsDynamic) {\n    const page = denormalizePagePath(normalizePagePath(pathname))\n    // This code would be much cleaner using `immer` and directly pushing into\n    // the result from `getPageFiles`, we could maybe consider that in the\n    // future.\n    if (page in filteredBuildManifest.pages) {\n      filteredBuildManifest = {\n        ...filteredBuildManifest,\n        pages: {\n          ...filteredBuildManifest.pages,\n          [page]: [\n            ...filteredBuildManifest.pages[page],\n            ...filteredBuildManifest.lowPriorityFiles.filter((f) =>\n              f.includes('_buildManifest')\n            ),\n          ],\n        },\n        lowPriorityFiles: filteredBuildManifest.lowPriorityFiles.filter(\n          (f) => !f.includes('_buildManifest')\n        ),\n      }\n    }\n  }\n\n  const generateStaticHTML = requireStaticHTML || inAmpMode\n  const renderToStream = (element: React.ReactElement) =>\n    new Promise<RenderResult>((resolve, reject) => {\n      const stream = new PassThrough()\n      let resolved = false\n      const doResolve = () => {\n        if (!resolved) {\n          resolved = true\n\n          resolve(\n            new Observable((observer) => {\n              stream.on('data', (chunk) => {\n                observer.next(chunk.toString('utf-8'))\n              })\n              stream.once('end', () => {\n                observer.complete()\n              })\n\n              startWriting()\n              return () => {\n                abort()\n              }\n            })\n          )\n        }\n      }\n\n      const { abort, startWriting } = (\n        ReactDOMServer as any\n      ).pipeToNodeWritable(element, stream, {\n        onError(error: Error) {\n          if (!resolved) {\n            resolved = true\n            reject(error)\n          }\n          abort()\n        },\n        onReadyToStream() {\n          if (!generateStaticHTML) {\n            doResolve()\n          }\n        },\n        onCompleteAll() {\n          doResolve()\n        },\n      })\n    }).then(multiplexResult)\n\n  const renderDocument = async () => {\n    if (Document.getInitialProps) {\n      const renderPage: RenderPage = (\n        options: ComponentsEnhancer = {}\n      ): RenderPageResult | Promise<RenderPageResult> => {\n        if (ctx.err && ErrorDebug) {\n          const html = ReactDOMServer.renderToString(\n            <ErrorDebug error={ctx.err} />\n          )\n          return { html, head }\n        }\n\n        if (dev && (props.router || props.Component)) {\n          throw new Error(\n            `'router' and 'Component' can not be returned in getInitialProps from _app.js https://nextjs.org/docs/messages/cant-override-next-props`\n          )\n        }\n\n        const { App: EnhancedApp, Component: EnhancedComponent } =\n          enhanceComponents(options, App, Component)\n\n        const html = ReactDOMServer.renderToString(\n          <AppContainer>\n            <EnhancedApp\n              Component={EnhancedComponent}\n              router={router}\n              {...props}\n            />\n          </AppContainer>\n        )\n        return { html, head }\n      }\n      const documentCtx = { ...ctx, renderPage }\n      const docProps: DocumentInitialProps = await loadGetInitialProps(\n        Document,\n        documentCtx\n      )\n      // the response might be finished on the getInitialProps call\n      if (isResSent(res) && !isSSG) return null\n\n      if (!docProps || typeof docProps.html !== 'string') {\n        const message = `\"${getDisplayName(\n          Document\n        )}.getInitialProps()\" should resolve to an object with a \"html\" prop set with a valid html string`\n        throw new Error(message)\n      }\n\n      return {\n        bodyResult: Observable.of(docProps.html),\n        documentElement: (htmlProps: HtmlProps) => (\n          <Document {...htmlProps} {...docProps} />\n        ),\n        head: docProps.head,\n        headTags: await headTags(documentCtx),\n        styles: docProps.styles,\n      }\n    } else {\n      const content =\n        ctx.err && ErrorDebug ? (\n          <ErrorDebug error={ctx.err} />\n        ) : (\n          <AppContainer>\n            <App {...props} Component={Component} router={router} />\n          </AppContainer>\n        )\n      const bodyResult = concurrentFeatures\n        ? await renderToStream(content)\n        : Observable.of(ReactDOMServer.renderToString(content))\n\n      return {\n        bodyResult,\n        documentElement: () => (Document as any)(),\n        head,\n        headTags: [],\n        // TODO: Experimental styled-jsx 5 support\n        styles: [...flush()],\n      }\n    }\n  }\n\n  const documentResult = await renderDocument()\n  if (!documentResult) {\n    return null\n  }\n\n  const dynamicImportsIds = new Set<string | number>()\n  const dynamicImports = new Set<string>()\n\n  for (const mod of reactLoadableModules) {\n    const manifestItem: ManifestItem = reactLoadableManifest[mod]\n\n    if (manifestItem) {\n      dynamicImportsIds.add(manifestItem.id)\n      manifestItem.files.forEach((item) => {\n        dynamicImports.add(item)\n      })\n    }\n  }\n\n  const hybridAmp = ampState.hybrid\n\n  const docComponentsRendered: DocumentProps['docComponentsRendered'] = {}\n  const {\n    assetPrefix,\n    buildId,\n    customServer,\n    defaultLocale,\n    disableOptimizedLoading,\n    domainLocales,\n    locale,\n    locales,\n    runtimeConfig,\n  } = renderOpts\n  const htmlProps: any = {\n    __NEXT_DATA__: {\n      props, // The result of getInitialProps\n      page: pathname, // The rendered page\n      query, // querystring parsed / passed by the user\n      buildId, // buildId is used to facilitate caching of page bundles, we send it to the client so that pageloader knows where to load bundles\n      assetPrefix: assetPrefix === '' ? undefined : assetPrefix, // send assetPrefix to the client side when configured, otherwise don't sent in the resulting HTML\n      runtimeConfig, // runtimeConfig if provided, otherwise don't sent in the resulting HTML\n      nextExport: nextExport === true ? true : undefined, // If this is a page exported by `next export`\n      autoExport: isAutoExport === true ? true : undefined, // If this is an auto exported page\n      isFallback,\n      dynamicIds:\n        dynamicImportsIds.size === 0\n          ? undefined\n          : Array.from(dynamicImportsIds),\n      err: renderOpts.err ? serializeError(dev, renderOpts.err) : undefined, // Error if one happened, otherwise don't sent in the resulting HTML\n      gsp: !!getStaticProps ? true : undefined, // whether the page is getStaticProps\n      gssp: !!getServerSideProps ? true : undefined, // whether the page is getServerSideProps\n      customServer, // whether the user is using a custom server\n      gip: hasPageGetInitialProps ? true : undefined, // whether the page has getInitialProps\n      appGip: !defaultAppGetInitialProps ? true : undefined, // whether the _app has getInitialProps\n      locale,\n      locales,\n      defaultLocale,\n      domainLocales,\n      isPreview: isPreview === true ? true : undefined,\n    },\n    buildManifest: filteredBuildManifest,\n    docComponentsRendered,\n    dangerousAsPath: router.asPath,\n    canonicalBase:\n      !renderOpts.ampPath && (req as any).__nextStrippedLocale\n        ? `${renderOpts.canonicalBase || ''}/${renderOpts.locale}`\n        : renderOpts.canonicalBase,\n    ampPath,\n    inAmpMode,\n    isDevelopment: !!dev,\n    hybridAmp,\n    dynamicImports: Array.from(dynamicImports),\n    assetPrefix,\n    // Only enabled in production as development mode has features relying on HMR (style injection for example)\n    unstable_runtimeJS:\n      process.env.NODE_ENV === 'production'\n        ? pageConfig.unstable_runtimeJS\n        : undefined,\n    unstable_JsPreload: pageConfig.unstable_JsPreload,\n    devOnlyCacheBusterQueryString,\n    scriptLoader,\n    locale,\n    disableOptimizedLoading,\n    head: documentResult.head,\n    headTags: documentResult?.headTags,\n    styles: documentResult.styles,\n  }\n  const documentHTML = ReactDOMServer.renderToStaticMarkup(\n    <AmpStateContext.Provider value={ampState}>\n      <HtmlContext.Provider value={htmlProps}>\n        {documentResult.documentElement(htmlProps)}\n      </HtmlContext.Provider>\n    </AmpStateContext.Provider>\n  )\n\n  if (process.env.NODE_ENV !== 'production') {\n    const nonRenderedComponents = []\n    const expectedDocComponents = ['Main', 'Head', 'NextScript', 'Html']\n\n    for (const comp of expectedDocComponents) {\n      if (!(docComponentsRendered as any)[comp]) {\n        nonRenderedComponents.push(comp)\n      }\n    }\n    const plural = nonRenderedComponents.length !== 1 ? 's' : ''\n\n    if (nonRenderedComponents.length) {\n      const missingComponentList = nonRenderedComponents\n        .map((e) => `<${e} />`)\n        .join(', ')\n      warn(\n        `Your custom Document (pages/_document) did not render all the required subcomponent${plural}.\\n` +\n          `Missing component${plural}: ${missingComponentList}\\n` +\n          'Read how to fix here: https://nextjs.org/docs/messages/missing-document-component'\n      )\n    }\n  }\n\n  let results: Array<RenderResult> = []\n  const renderTargetIdx = documentHTML.indexOf(BODY_RENDER_TARGET)\n  results.push(\n    Observable.of(\n      '<!DOCTYPE html>' + documentHTML.substring(0, renderTargetIdx)\n    )\n  )\n  if (inAmpMode) {\n    results.push(Observable.of('<!-- __NEXT_DATA__ -->'))\n  }\n  results.push(documentResult.bodyResult)\n  results.push(\n    Observable.of(\n      documentHTML.substring(renderTargetIdx + BODY_RENDER_TARGET.length)\n    )\n  )\n\n  const postProcessors: Array<((html: string) => Promise<string>) | null> = (\n    generateStaticHTML\n      ? [\n          inAmpMode\n            ? async (html: string) => {\n                html = await optimizeAmp(html, renderOpts.ampOptimizerConfig)\n                if (!renderOpts.ampSkipValidation && renderOpts.ampValidator) {\n                  await renderOpts.ampValidator(html, pathname)\n                }\n                return html\n              }\n            : null,\n          process.env.__NEXT_OPTIMIZE_FONTS ||\n          process.env.__NEXT_OPTIMIZE_IMAGES\n            ? async (html: string) => {\n                return await postProcess(\n                  html,\n                  { getFontDefinition },\n                  {\n                    optimizeFonts: renderOpts.optimizeFonts,\n                    optimizeImages: renderOpts.optimizeImages,\n                  }\n                )\n              }\n            : null,\n          renderOpts.optimizeCss\n            ? async (html: string) => {\n                // eslint-disable-next-line import/no-extraneous-dependencies\n                const Critters = require('critters')\n                const cssOptimizer = new Critters({\n                  ssrMode: true,\n                  reduceInlineStyles: false,\n                  path: renderOpts.distDir,\n                  publicPath: `${renderOpts.assetPrefix}/_next/`,\n                  preload: 'media',\n                  fonts: false,\n                  ...renderOpts.optimizeCss,\n                })\n                return await cssOptimizer.process(html)\n              }\n            : null,\n          inAmpMode || hybridAmp\n            ? async (html: string) => {\n                return html.replace(/&amp;amp=1/g, '&amp=1')\n              }\n            : null,\n        ]\n      : []\n  ).filter(Boolean)\n\n  if (postProcessors.length > 0) {\n    let html = await resultsToString(results)\n    for (const postProcessor of postProcessors) {\n      if (postProcessor) {\n        html = await postProcessor(html)\n      }\n    }\n    results = [Observable.of(html)]\n  }\n\n  return mergeResults(results)\n}\n\nfunction multiplexResult(result: RenderResult): RenderResult {\n  const chunks: Array<string> = []\n  const subscribers: Set<ZenObservable.SubscriptionObserver<string>> = new Set()\n  let terminator:\n    | ((subscriber: ZenObservable.SubscriptionObserver<string>) => void)\n    | null = null\n\n  result.subscribe({\n    next(chunk) {\n      chunks.push(chunk)\n      subscribers.forEach((subscriber) => subscriber.next(chunk))\n    },\n    error(error) {\n      if (!terminator) {\n        terminator = (subscriber) => subscriber.error(error)\n        subscribers.forEach(terminator)\n        subscribers.clear()\n      }\n    },\n    complete() {\n      if (!terminator) {\n        terminator = (subscriber) => subscriber.complete()\n        subscribers.forEach(terminator)\n        subscribers.clear()\n      }\n    },\n  })\n\n  return new Observable((observer) => {\n    for (const chunk of chunks) {\n      if (observer.closed) {\n        return\n      }\n      observer.next(chunk)\n    }\n\n    if (terminator) {\n      terminator(observer)\n      return\n    }\n\n    subscribers.add(observer)\n    return () => {\n      subscribers.delete(observer)\n    }\n  })\n}\n\nfunction errorToJSON(err: Error): Error {\n  const { name, message, stack } = err\n  return { name, message, stack }\n}\n\nfunction serializeError(\n  dev: boolean | undefined,\n  err: Error\n): Error & { statusCode?: number } {\n  if (dev) {\n    return errorToJSON(err)\n  }\n\n  return {\n    name: 'Internal Server Error.',\n    message: '500 - Internal Server Error.',\n    statusCode: 500,\n  }\n}\n"],"names":["renderToHTML","ReactDOMServer","noRouter","message","Error","ServerRouter","pathname","query","as","isFallback","isReady","basePath","locale","locales","defaultLocale","domainLocales","isPreview","isLocaleDomain","route","replace","asPath","push","reload","back","prefetch","beforePopState","enhanceComponents","options","App","Component","enhanceApp","enhanceComponent","invalidKeysMsg","methodName","invalidKeys","join","checkRedirectValues","redirect","req","method","destination","permanent","statusCode","errors","hasStatusCode","hasPermanent","has","destinationType","basePathType","length","url","res","renderOpts","devOnlyCacheBusterQueryString","dev","Date","now","Object","assign","err","ampPath","Document","pageConfig","buildManifest","fontManifest","reactLoadableManifest","ErrorDebug","getStaticProps","getStaticPaths","getServerSideProps","isDataReq","params","previewProps","requireStaticHTML","concurrentFeatures","getFontDefinition","callMiddleware","args","props","results","middlewareFunc","default","curResults","result","headTags","__nextFallback","__nextLocale","__nextDefaultLocale","isSSG","isBuildTimeSSG","nextExport","defaultAppGetInitialProps","getInitialProps","origGetInitialProps","hasPageGetInitialProps","pageIsDynamic","isAutoExport","resolvedAsPath","isValidElementType","require","amp","endsWith","includes","preloadAll","previewData","routerIsReady","router","__nextIsLocaleDomain","ctx","undefined","AppTree","AppContainer","ampState","ampFirst","hasQuery","Boolean","hybrid","inAmpMode","reactLoadableModules","head","scriptLoader","children","Provider","value","updateHead","state","updateScripts","scripts","mountedInstances","Set","moduleName","__N_PREVIEW","data","preview","staticPropsError","code","keys","filter","key","process","env","NODE_ENV","notFound","isNotFound","__N_REDIRECT","__N_REDIRECT_STATUS","__N_REDIRECT_BASE_PATH","isRedirect","revalidate","Number","isInteger","Math","ceil","console","warn","JSON","stringify","pageProps","pageData","resolvedUrl","serverSidePropsError","unstable_notFound","unstable_redirect","Promise","dataFetchError","of","filteredBuildManifest","page","pages","lowPriorityFiles","f","generateStaticHTML","renderToStream","element","resolve","reject","stream","resolved","doResolve","observer","on","chunk","next","toString","once","complete","startWriting","abort","pipeToNodeWritable","onError","error","onReadyToStream","onCompleteAll","then","multiplexResult","renderDocument","renderPage","html","renderToString","EnhancedApp","EnhancedComponent","documentCtx","docProps","bodyResult","documentElement","htmlProps","styles","content","documentResult","dynamicImportsIds","dynamicImports","mod","manifestItem","add","id","files","forEach","item","hybridAmp","docComponentsRendered","assetPrefix","buildId","customServer","disableOptimizedLoading","runtimeConfig","__NEXT_DATA__","autoExport","dynamicIds","size","Array","from","serializeError","gsp","gssp","gip","appGip","dangerousAsPath","canonicalBase","__nextStrippedLocale","isDevelopment","unstable_runtimeJS","unstable_JsPreload","documentHTML","renderToStaticMarkup","nonRenderedComponents","expectedDocComponents","comp","plural","missingComponentList","map","e","renderTargetIdx","indexOf","substring","postProcessors","ampOptimizerConfig","ampSkipValidation","ampValidator","__NEXT_OPTIMIZE_FONTS","__NEXT_OPTIMIZE_IMAGES","optimizeFonts","optimizeImages","optimizeCss","Critters","cssOptimizer","ssrMode","reduceInlineStyles","path","distDir","publicPath","preload","fonts","postProcessor","Observable","chunks","subscribers","terminator","subscribe","subscriber","clear","closed","delete","errorToJSON","name","stack"],"mappings":"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"}