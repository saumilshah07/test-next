{"version":3,"sources":["../../server/config-shared.ts"],"sourcesContent":["import os from 'os'\nimport { Header, Redirect, Rewrite } from '../lib/load-custom-routes'\nimport { ImageConfig, imageConfigDefault } from './image-config'\n\ntype NoOptionals<T> = {\n  [P in keyof T]-?: T[P]\n}\n\nexport type NextConfigComplete = NoOptionals<NextConfig>\n\nexport interface I18NConfig {\n  defaultLocale: string\n  domains?: DomainLocale[]\n  localeDetection?: false\n  locales: string[]\n}\n\nexport interface DomainLocale {\n  defaultLocale: string\n  domain: string\n  http?: true\n  locales?: string[]\n}\n\nexport interface ESLintConfig {\n  /** Only run ESLint on these directories with `next lint` and `next build`. */\n  dirs?: string[]\n  /** Do not run ESLint during production builds (`next build`). */\n  ignoreDuringBuilds?: boolean\n}\n\nexport interface TypeScriptConfig {\n  /** Do not run TypeScript during production builds (`next build`). */\n  ignoreBuildErrors?: boolean\n}\n\nexport type NextConfig = { [key: string]: any } & {\n  i18n?: I18NConfig | null\n\n  eslint?: ESLintConfig\n  typescript?: TypeScriptConfig\n\n  headers?: () => Promise<Header[]>\n  rewrites?: () => Promise<\n    | Rewrite[]\n    | {\n        beforeFiles: Rewrite[]\n        afterFiles: Rewrite[]\n        fallback: Rewrite[]\n      }\n  >\n  redirects?: () => Promise<Redirect[]>\n\n  webpack5?: false\n  excludeDefaultMomentLocales?: boolean\n\n  webpack?:\n    | ((\n        config: any,\n        context: {\n          dir: string\n          dev: boolean\n          isServer: boolean\n          buildId: string\n          config: NextConfigComplete\n          defaultLoaders: { babel: any }\n          totalPages: number\n          webpack: any\n        }\n      ) => any)\n    | null\n\n  trailingSlash?: boolean\n  env?: { [key: string]: string }\n  distDir?: string\n  cleanDistDir?: boolean\n  assetPrefix?: string\n  useFileSystemPublicRoutes?: boolean\n  generateBuildId?: () => string | null | Promise<string | null>\n  generateEtags?: boolean\n  pageExtensions?: string[]\n  compress?: boolean\n  poweredByHeader?: boolean\n  images?: ImageConfig\n  devIndicators?: {\n    buildActivity?: boolean\n  }\n  onDemandEntries?: {\n    maxInactiveAge?: number\n    pagesBufferLength?: number\n  }\n  amp?: {\n    canonicalBase?: string\n  }\n  basePath?: string\n  sassOptions?: { [key: string]: any }\n  productionBrowserSourceMaps?: boolean\n  optimizeFonts?: boolean\n  reactStrictMode?: boolean\n  publicRuntimeConfig?: { [key: string]: any }\n  serverRuntimeConfig?: { [key: string]: any }\n  httpAgentOptions?: { keepAlive?: boolean }\n  future?: {\n    /**\n     * @deprecated this options was moved to the top level\n     */\n    webpack5?: false\n    strictPostcssConfiguration?: boolean\n  }\n  experimental?: {\n    swcMinify?: boolean\n    swcLoader?: boolean\n    cpus?: number\n    sharedPool?: boolean\n    plugins?: boolean\n    profiling?: boolean\n    isrFlushToDisk?: boolean\n    reactMode?: 'legacy' | 'concurrent' | 'blocking'\n    workerThreads?: boolean\n    pageEnv?: boolean\n    optimizeImages?: boolean\n    optimizeCss?: boolean\n    scrollRestoration?: boolean\n    stats?: boolean\n    externalDir?: boolean\n    conformance?: boolean\n    amp?: {\n      optimizer?: any\n      validator?: string\n      skipValidation?: boolean\n    }\n    reactRoot?: boolean\n    disableOptimizedLoading?: boolean\n    gzipSize?: boolean\n    craCompat?: boolean\n    esmExternals?: boolean | 'loose'\n    staticPageGenerationTimeout?: number\n    isrMemoryCacheSize?: number\n    nftTracing?: boolean\n    concurrentFeatures?: boolean\n  }\n}\n\nexport const defaultConfig: NextConfig = {\n  env: {},\n  webpack: null,\n  webpackDevMiddleware: null,\n  eslint: {\n    ignoreDuringBuilds: false,\n  },\n  typescript: {\n    ignoreBuildErrors: false,\n  },\n  distDir: '.next',\n  cleanDistDir: true,\n  assetPrefix: '',\n  configOrigin: 'default',\n  useFileSystemPublicRoutes: true,\n  generateBuildId: () => null,\n  generateEtags: true,\n  pageExtensions: ['tsx', 'ts', 'jsx', 'js'],\n  target: 'server',\n  poweredByHeader: true,\n  compress: true,\n  analyticsId: process.env.VERCEL_ANALYTICS_ID || '',\n  images: imageConfigDefault,\n  devIndicators: {\n    buildActivity: true,\n  },\n  onDemandEntries: {\n    maxInactiveAge: 60 * 1000,\n    pagesBufferLength: 2,\n  },\n  amp: {\n    canonicalBase: '',\n  },\n  basePath: '',\n  sassOptions: {},\n  trailingSlash: false,\n  i18n: null,\n  productionBrowserSourceMaps: false,\n  optimizeFonts: true,\n  webpack5:\n    Number(process.env.NEXT_PRIVATE_TEST_WEBPACK4_MODE) > 0 ? false : undefined,\n  excludeDefaultMomentLocales: true,\n  serverRuntimeConfig: {},\n  publicRuntimeConfig: {},\n  reactStrictMode: false,\n  httpAgentOptions: {\n    keepAlive: true,\n  },\n  experimental: {\n    swcLoader: false,\n    swcMinify: false,\n    cpus: Math.max(\n      1,\n      (Number(process.env.CIRCLE_NODE_TOTAL) ||\n        (os.cpus() || { length: 1 }).length) - 1\n    ),\n    sharedPool: false,\n    plugins: false,\n    profiling: false,\n    isrFlushToDisk: true,\n    workerThreads: false,\n    pageEnv: false,\n    optimizeImages: false,\n    optimizeCss: false,\n    scrollRestoration: false,\n    stats: false,\n    externalDir: false,\n    reactRoot: Number(process.env.NEXT_PRIVATE_REACT_ROOT) > 0,\n    disableOptimizedLoading: false,\n    gzipSize: true,\n    craCompat: false,\n    esmExternals: false,\n    staticPageGenerationTimeout: 60,\n    // default to 50MB limit\n    isrMemoryCacheSize: 50 * 1024 * 1024,\n    nftTracing: false,\n    concurrentFeatures: false,\n  },\n  future: {\n    strictPostcssConfiguration: false,\n  },\n}\n\nexport function normalizeConfig(phase: string, config: any) {\n  if (typeof config === 'function') {\n    config = config(phase, { defaultConfig })\n\n    if (typeof config.then === 'function') {\n      throw new Error(\n        '> Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'\n      )\n    }\n  }\n  return config\n}\n"],"names":["normalizeConfig","defaultConfig","env","webpack","webpackDevMiddleware","eslint","ignoreDuringBuilds","typescript","ignoreBuildErrors","distDir","cleanDistDir","assetPrefix","configOrigin","useFileSystemPublicRoutes","generateBuildId","generateEtags","pageExtensions","target","poweredByHeader","compress","analyticsId","process","VERCEL_ANALYTICS_ID","images","devIndicators","buildActivity","onDemandEntries","maxInactiveAge","pagesBufferLength","amp","canonicalBase","basePath","sassOptions","trailingSlash","i18n","productionBrowserSourceMaps","optimizeFonts","webpack5","Number","NEXT_PRIVATE_TEST_WEBPACK4_MODE","undefined","excludeDefaultMomentLocales","serverRuntimeConfig","publicRuntimeConfig","reactStrictMode","httpAgentOptions","keepAlive","experimental","swcLoader","swcMinify","cpus","Math","max","CIRCLE_NODE_TOTAL","length","sharedPool","plugins","profiling","isrFlushToDisk","workerThreads","pageEnv","optimizeImages","optimizeCss","scrollRestoration","stats","externalDir","reactRoot","NEXT_PRIVATE_REACT_ROOT","disableOptimizedLoading","gzipSize","craCompat","esmExternals","staticPageGenerationTimeout","isrMemoryCacheSize","nftTracing","concurrentFeatures","future","strictPostcssConfiguration","phase","config","then","Error"],"mappings":";;;;QAkOgBA,eAAe,GAAfA,eAAe;;AAlOhB,GAAI,CAAJ,GAAI;AAE6B,GAAgB,CAAhB,YAAgB;;;;;;AA6IzD,KAAK,CAACC,aAAa,GAAe,CAAC;IACxCC,GAAG,EAAE,CAAC;IAAA,CAAC;IACPC,OAAO,EAAE,IAAI;IACbC,oBAAoB,EAAE,IAAI;IAC1BC,MAAM,EAAE,CAAC;QACPC,kBAAkB,EAAE,KAAK;IAC3B,CAAC;IACDC,UAAU,EAAE,CAAC;QACXC,iBAAiB,EAAE,KAAK;IAC1B,CAAC;IACDC,OAAO,EAAE,CAAO;IAChBC,YAAY,EAAE,IAAI;IAClBC,WAAW,EAAE,CAAE;IACfC,YAAY,EAAE,CAAS;IACvBC,yBAAyB,EAAE,IAAI;IAC/BC,eAAe,MAAQ,IAAI;;IAC3BC,aAAa,EAAE,IAAI;IACnBC,cAAc,EAAE,CAAC;QAAA,CAAK;QAAE,CAAI;QAAE,CAAK;QAAE,CAAI;IAAA,CAAC;IAC1CC,MAAM,EAAE,CAAQ;IAChBC,eAAe,EAAE,IAAI;IACrBC,QAAQ,EAAE,IAAI;IACdC,WAAW,EAAEC,OAAO,CAACnB,GAAG,CAACoB,mBAAmB,IAAI,CAAE;IAClDC,MAAM,EAnKwC,YAAgB;IAoK9DC,aAAa,EAAE,CAAC;QACdC,aAAa,EAAE,IAAI;IACrB,CAAC;IACDC,eAAe,EAAE,CAAC;QAChBC,cAAc,EAAE,EAAE,GAAG,IAAI;QACzBC,iBAAiB,EAAE,CAAC;IACtB,CAAC;IACDC,GAAG,EAAE,CAAC;QACJC,aAAa,EAAE,CAAE;IACnB,CAAC;IACDC,QAAQ,EAAE,CAAE;IACZC,WAAW,EAAE,CAAC;IAAA,CAAC;IACfC,aAAa,EAAE,KAAK;IACpBC,IAAI,EAAE,IAAI;IACVC,2BAA2B,EAAE,KAAK;IAClCC,aAAa,EAAE,IAAI;IACnBC,QAAQ,EACNC,MAAM,CAACjB,OAAO,CAACnB,GAAG,CAACqC,+BAA+B,IAAI,CAAC,GAAG,KAAK,GAAGC,SAAS;IAC7EC,2BAA2B,EAAE,IAAI;IACjCC,mBAAmB,EAAE,CAAC;IAAA,CAAC;IACvBC,mBAAmB,EAAE,CAAC;IAAA,CAAC;IACvBC,eAAe,EAAE,KAAK;IACtBC,gBAAgB,EAAE,CAAC;QACjBC,SAAS,EAAE,IAAI;IACjB,CAAC;IACDC,YAAY,EAAE,CAAC;QACbC,SAAS,EAAE,KAAK;QAChBC,SAAS,EAAE,KAAK;QAChBC,IAAI,EAAEC,IAAI,CAACC,GAAG,CACZ,CAAC,GACAd,MAAM,CAACjB,OAAO,CAACnB,GAAG,CAACmD,iBAAiB,MApM5B,GAAI,SAqMPH,IAAI,MAAM,CAAC;YAACI,MAAM,EAAE,CAAC;QAAC,CAAC,EAAEA,MAAM,IAAI,CAAC;QAE5CC,UAAU,EAAE,KAAK;QACjBC,OAAO,EAAE,KAAK;QACdC,SAAS,EAAE,KAAK;QAChBC,cAAc,EAAE,IAAI;QACpBC,aAAa,EAAE,KAAK;QACpBC,OAAO,EAAE,KAAK;QACdC,cAAc,EAAE,KAAK;QACrBC,WAAW,EAAE,KAAK;QAClBC,iBAAiB,EAAE,KAAK;QACxBC,KAAK,EAAE,KAAK;QACZC,WAAW,EAAE,KAAK;QAClBC,SAAS,EAAE5B,MAAM,CAACjB,OAAO,CAACnB,GAAG,CAACiE,uBAAuB,IAAI,CAAC;QAC1DC,uBAAuB,EAAE,KAAK;QAC9BC,QAAQ,EAAE,IAAI;QACdC,SAAS,EAAE,KAAK;QAChBC,YAAY,EAAE,KAAK;QACnBC,2BAA2B,EAAE,EAAE;QAC/B,EAAwB,AAAxB,sBAAwB;QACxBC,kBAAkB,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI;QACpCC,UAAU,EAAE,KAAK;QACjBC,kBAAkB,EAAE,KAAK;IAC3B,CAAC;IACDC,MAAM,EAAE,CAAC;QACPC,0BAA0B,EAAE,KAAK;IACnC,CAAC;AACH,CAAC;QAjFY5E,aAAa,GAAbA,aAAa;SAmFVD,eAAe,CAAC8E,KAAa,EAAEC,MAAW,EAAE,CAAC;IAC3D,EAAE,EAAE,MAAM,CAACA,MAAM,KAAK,CAAU,WAAE,CAAC;QACjCA,MAAM,GAAGA,MAAM,CAACD,KAAK,EAAE,CAAC;YAAC7E,aAAa;QAAC,CAAC;QAExC,EAAE,EAAE,MAAM,CAAC8E,MAAM,CAACC,IAAI,KAAK,CAAU,WAAE,CAAC;YACtC,KAAK,CAAC,GAAG,CAACC,KAAK,CACb,CAA4F;QAEhG,CAAC;IACH,CAAC;IACD,MAAM,CAACF,MAAM;AACf,CAAC"}