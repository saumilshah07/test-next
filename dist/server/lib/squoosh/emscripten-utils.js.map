{"version":3,"sources":["../../../../server/lib/squoosh/emscripten-utils.ts"],"sourcesContent":["import { fileURLToPath } from 'url'\n\nexport function pathify(path: string) {\n  if (path.startsWith('file://')) {\n    path = fileURLToPath(path)\n  }\n  return path\n}\n\nexport function instantiateEmscriptenWasm(\n  factory: (args: { locateFile: () => string }) => {\n    decode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n    encode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n  },\n  path: string\n) {\n  return factory({\n    locateFile() {\n      return pathify(path)\n    },\n  })\n}\n"],"names":["pathify","instantiateEmscriptenWasm","path","startsWith","factory","locateFile"],"mappings":";;;;QAEgBA,OAAO,GAAPA,OAAO;QAOPC,yBAAyB,GAAzBA,yBAAyB;AATX,GAAK,CAAL,IAAK;SAEnBD,OAAO,CAACE,IAAY,EAAE,CAAC;IACrC,EAAE,EAAEA,IAAI,CAACC,UAAU,CAAC,CAAS,WAAG,CAAC;QAC/BD,IAAI,OAJsB,IAAK,gBAIVA,IAAI;IAC3B,CAAC;IACD,MAAM,CAACA,IAAI;AACb,CAAC;SAEeD,yBAAyB,CACvCG,OAaC,EACDF,IAAY,EACZ,CAAC;IACD,MAAM,CAACE,OAAO,CAAC,CAAC;QACdC,UAAU,IAAG,CAAC;YACZ,MAAM,CAACL,OAAO,CAACE,IAAI;QACrB,CAAC;IACH,CAAC;AACH,CAAC"}